image:
  - melezhik/sparrow:debian
tasks:
  -
    name: test
    default: true
    language: Bash
    code: |
      set -e
      cd source/
      zef install . --deps-only --test-depends --build-depends --/test -to=home
      zef test -v .
    depends:
      -
        name: deps
        name: submodules
  -
    name: deps
    language: Bash
    code: |
      set -e
      sudo apt-get update
      sudo apt-get install -y cmake g++ make      
